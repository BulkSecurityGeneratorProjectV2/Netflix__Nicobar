<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_67) on Mon Jan 26 12:21:17 PST 2015 -->
<title>CassandraArchiveRepository</title>
<meta name="date" content="2015-01-26">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CassandraArchiveRepository";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/netflix/nicobar/cassandra/BasicCassandraRepositoryConfig.Builder.html" title="class in com.netflix.nicobar.cassandra"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.Columns.html" title="enum in com.netflix.nicobar.cassandra"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/netflix/nicobar/cassandra/CassandraArchiveRepository.html" target="_top">Frames</a></li>
<li><a href="CassandraArchiveRepository.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.netflix.nicobar.cassandra</div>
<h2 title="Class CassandraArchiveRepository" class="title">Class CassandraArchiveRepository</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.netflix.nicobar.cassandra.CassandraArchiveRepository</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html" title="interface in com.netflix.nicobar.core.persistence">ArchiveRepository</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">CassandraArchiveRepository</span>
extends java.lang.Object
implements <a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html" title="interface in com.netflix.nicobar.core.persistence">ArchiveRepository</a></pre>
<div class="block">Data access object of <a href="../../../../com/netflix/nicobar/core/archive/ScriptArchive.html" title="interface in com.netflix.nicobar.core.archive"><code>ScriptArchive</code></a>s stored in Cassandra.
 This implementation is based on the Astyanax and requires CQL 3 support to be enabled.
 <p>
 The query algorithm attempts to divide up read operations such that they won't overwhelm Cassandra
 if many instances are using this implementation to poll for updates.
 Upon insertion, all archives are assigned a shard number calculated as <code>(moduleId.hashCode() % shardNum)</code>.
 The shard number is subsequently inserted into a column for which a secondary index has been defined.
 RepositoryView poller methods will first search each shard for any rows with an update timestamp greater than
 the last poll time, and if any are found, the contents of those archives are loaded in small batches.


<pre>
 Default Schema:

 CREATE TABLE script_repo (
    module_id varchar,
    module_name varchar,
    module_version varchar,
    shard_num int,
    last_update timestamp,
    module_spec varchar,
    archive_content_hash blob,
    archive_content blob,
 PRIMARY KEY (module_id)
 );

 CREATE INDEX script_repo_shard_num_index on script_repo (shard_num);
 </pre>

 See <a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepositoryConfig.html" title="interface in com.netflix.nicobar.cassandra"><code>CassandraArchiveRepositoryConfig</code></a> to override the default table name.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.Columns.html" title="enum in com.netflix.nicobar.cassandra">CassandraArchiveRepository.Columns</a></strong></code>
<div class="block">column names</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.DefaultView.html" title="class in com.netflix.nicobar.cassandra">CassandraArchiveRepository.DefaultView</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../com/netflix/nicobar/core/persistence/RepositoryView.html" title="interface in com.netflix.nicobar.core.persistence">RepositoryView</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#defaultView">defaultView</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#CassandraArchiveRepository(com.netflix.nicobar.cassandra.CassandraArchiveRepositoryConfig)">CassandraArchiveRepository</a></strong>(<a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepositoryConfig.html" title="interface in com.netflix.nicobar.cassandra">CassandraArchiveRepositoryConfig</a>&nbsp;config)</code>
<div class="block">Construct a instance of the repository with the given configuration</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#CassandraArchiveRepository(com.netflix.nicobar.cassandra.CassandraArchiveRepositoryConfig,%20com.netflix.nicobar.core.persistence.RepositoryView)">CassandraArchiveRepository</a></strong>(<a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepositoryConfig.html" title="interface in com.netflix.nicobar.cassandra">CassandraArchiveRepositoryConfig</a>&nbsp;config,
                          <a href="../../../../com/netflix/nicobar/core/persistence/RepositoryView.html" title="interface in com.netflix.nicobar.core.persistence">RepositoryView</a>&nbsp;defaultView)</code>
<div class="block">Construct a instance of the repository with the given configuration</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#calculateHash(byte[])">calculateHash</a></strong>(byte[]&nbsp;content)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#calculateShardNum(com.netflix.nicobar.core.archive.ModuleId)">calculateShardNum</a></strong>(<a href="../../../../com/netflix/nicobar/core/archive/ModuleId.html" title="class in com.netflix.nicobar.core.archive">ModuleId</a>&nbsp;moduleId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#deleteArchive(com.netflix.nicobar.core.archive.ModuleId)">deleteArchive</a></strong>(<a href="../../../../com/netflix/nicobar/core/archive/ModuleId.html" title="class in com.netflix.nicobar.core.archive">ModuleId</a>&nbsp;moduleId)</code>
<div class="block">Delete an archive by ID</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#generateSelectByShardCql(java.util.EnumSet,%20java.lang.Integer)">generateSelectByShardCql</a></strong>(java.util.EnumSet&lt;?&gt;&nbsp;columns,
                        java.lang.Integer&nbsp;shardNum)</code>
<div class="block">Generate the CQL to select specific columns by shard number.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepositoryConfig.html" title="interface in com.netflix.nicobar.cassandra">CassandraArchiveRepositoryConfig</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#getConfig()">getConfig</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/netflix/nicobar/core/persistence/RepositoryView.html" title="interface in com.netflix.nicobar.core.persistence">RepositoryView</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#getDefaultView()">getDefaultView</a></strong>()</code>
<div class="block">The default view reports all archives inserted into this repository.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#getRepositoryId()">getRepositoryId</a></strong>()</code>
<div class="block">Get the ID of this repository</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.Iterable&lt;com.netflix.astyanax.model.Row&lt;java.lang.String,java.lang.String&gt;&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#getRows(java.util.EnumSet)">getRows</a></strong>(java.util.EnumSet&lt;?&gt;&nbsp;columns)</code>
<div class="block">Get all of the rows in in the table.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Set&lt;<a href="../../../../com/netflix/nicobar/core/archive/ScriptArchive.html" title="interface in com.netflix.nicobar.core.archive">ScriptArchive</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#getScriptArchives(java.util.Set)">getScriptArchives</a></strong>(java.util.Set&lt;<a href="../../../../com/netflix/nicobar/core/archive/ModuleId.html" title="class in com.netflix.nicobar.core.archive">ModuleId</a>&gt;&nbsp;moduleIds)</code>
<div class="block">Get all of the <a href="../../../../com/netflix/nicobar/core/archive/ScriptArchive.html" title="interface in com.netflix.nicobar.core.archive"><code>ScriptArchive</code></a>s for the given set of moduleIds.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/netflix/nicobar/core/persistence/RepositoryView.html" title="interface in com.netflix.nicobar.core.persistence">RepositoryView</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#getView(java.lang.String)">getView</a></strong>(java.lang.String&nbsp;view)</code>
<div class="block">No named views supported by this repository!
 Throws UnsupportedOperationException.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#insertArchive(com.netflix.nicobar.core.archive.JarScriptArchive)">insertArchive</a></strong>(<a href="../../../../com/netflix/nicobar/core/archive/JarScriptArchive.html" title="class in com.netflix.nicobar.core.archive">JarScriptArchive</a>&nbsp;jarScriptArchive)</code>
<div class="block">insert a Jar into the script archive</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#insertArchive(com.netflix.nicobar.core.archive.JarScriptArchive,%20java.util.Map)">insertArchive</a></strong>(<a href="../../../../com/netflix/nicobar/core/archive/JarScriptArchive.html" title="class in com.netflix.nicobar.core.archive">JarScriptArchive</a>&nbsp;jarScriptArchive,
             java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;initialDeploySpecs)</code>
<div class="block">Unsupported.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.html#verifyHash(byte[],%20byte[])">verifyHash</a></strong>(byte[]&nbsp;expectedHashCode,
          byte[]&nbsp;content)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="defaultView">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>defaultView</h4>
<pre>protected final&nbsp;<a href="../../../../com/netflix/nicobar/core/persistence/RepositoryView.html" title="interface in com.netflix.nicobar.core.persistence">RepositoryView</a> defaultView</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CassandraArchiveRepository(com.netflix.nicobar.cassandra.CassandraArchiveRepositoryConfig)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CassandraArchiveRepository</h4>
<pre>public&nbsp;CassandraArchiveRepository(<a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepositoryConfig.html" title="interface in com.netflix.nicobar.cassandra">CassandraArchiveRepositoryConfig</a>&nbsp;config)</pre>
<div class="block">Construct a instance of the repository with the given configuration</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>config</code> - </dd></dl>
</li>
</ul>
<a name="CassandraArchiveRepository(com.netflix.nicobar.cassandra.CassandraArchiveRepositoryConfig, com.netflix.nicobar.core.persistence.RepositoryView)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CassandraArchiveRepository</h4>
<pre>public&nbsp;CassandraArchiveRepository(<a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepositoryConfig.html" title="interface in com.netflix.nicobar.cassandra">CassandraArchiveRepositoryConfig</a>&nbsp;config,
                          <a href="../../../../com/netflix/nicobar/core/persistence/RepositoryView.html" title="interface in com.netflix.nicobar.core.persistence">RepositoryView</a>&nbsp;defaultView)</pre>
<div class="block">Construct a instance of the repository with the given configuration</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>config</code> - </dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getRepositoryId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRepositoryId</h4>
<pre>public&nbsp;java.lang.String&nbsp;getRepositoryId()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html#getRepositoryId()">ArchiveRepository</a></code></strong></div>
<div class="block">Get the ID of this repository</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html#getRepositoryId()">getRepositoryId</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html" title="interface in com.netflix.nicobar.core.persistence">ArchiveRepository</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the id string.</dd></dl>
</li>
</ul>
<a name="getDefaultView()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDefaultView</h4>
<pre>public&nbsp;<a href="../../../../com/netflix/nicobar/core/persistence/RepositoryView.html" title="interface in com.netflix.nicobar.core.persistence">RepositoryView</a>&nbsp;getDefaultView()</pre>
<div class="block">The default view reports all archives inserted into this repository.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html#getDefaultView()">getDefaultView</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html" title="interface in com.netflix.nicobar.core.persistence">ArchiveRepository</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the default view into all archives.</dd></dl>
</li>
</ul>
<a name="getView(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getView</h4>
<pre>public&nbsp;<a href="../../../../com/netflix/nicobar/core/persistence/RepositoryView.html" title="interface in com.netflix.nicobar.core.persistence">RepositoryView</a>&nbsp;getView(java.lang.String&nbsp;view)</pre>
<div class="block">No named views supported by this repository!
 Throws UnsupportedOperationException.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html#getView(java.lang.String)">getView</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html" title="interface in com.netflix.nicobar.core.persistence">ArchiveRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>view</code> - the name of the view.</dd>
<dt><span class="strong">Returns:</span></dt><dd>a <a href="../../../../com/netflix/nicobar/core/persistence/RepositoryView.html" title="interface in com.netflix.nicobar.core.persistence"><code>RepositoryView</code></a> that matches the given name or null if
         one wasn't found.</dd></dl>
</li>
</ul>
<a name="insertArchive(com.netflix.nicobar.core.archive.JarScriptArchive)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertArchive</h4>
<pre>public&nbsp;void&nbsp;insertArchive(<a href="../../../../com/netflix/nicobar/core/archive/JarScriptArchive.html" title="class in com.netflix.nicobar.core.archive">JarScriptArchive</a>&nbsp;jarScriptArchive)
                   throws java.io.IOException</pre>
<div class="block">insert a Jar into the script archive</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html#insertArchive(com.netflix.nicobar.core.archive.JarScriptArchive)">insertArchive</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html" title="interface in com.netflix.nicobar.core.persistence">ArchiveRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>jarScriptArchive</code> - script archive which describes the jar and
        the ModuleSpec which should be inserted</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="insertArchive(com.netflix.nicobar.core.archive.JarScriptArchive, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertArchive</h4>
<pre>public&nbsp;void&nbsp;insertArchive(<a href="../../../../com/netflix/nicobar/core/archive/JarScriptArchive.html" title="class in com.netflix.nicobar.core.archive">JarScriptArchive</a>&nbsp;jarScriptArchive,
                 java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;initialDeploySpecs)
                   throws java.io.IOException</pre>
<div class="block">Unsupported.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html#insertArchive(com.netflix.nicobar.core.archive.JarScriptArchive,%20java.util.Map)">insertArchive</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html" title="interface in com.netflix.nicobar.core.persistence">ArchiveRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>jarScriptArchive</code> - script archive which describes the jar and
        the ModuleSpec which should be inserted</dd><dd><code>initialDeploySpecs</code> - a set of initial deployment specs.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="getScriptArchives(java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getScriptArchives</h4>
<pre>public&nbsp;java.util.Set&lt;<a href="../../../../com/netflix/nicobar/core/archive/ScriptArchive.html" title="interface in com.netflix.nicobar.core.archive">ScriptArchive</a>&gt;&nbsp;getScriptArchives(java.util.Set&lt;<a href="../../../../com/netflix/nicobar/core/archive/ModuleId.html" title="class in com.netflix.nicobar.core.archive">ModuleId</a>&gt;&nbsp;moduleIds)
                                               throws java.io.IOException</pre>
<div class="block">Get all of the <a href="../../../../com/netflix/nicobar/core/archive/ScriptArchive.html" title="interface in com.netflix.nicobar.core.archive"><code>ScriptArchive</code></a>s for the given set of moduleIds. Will perform the operation in batches
 as specified by <a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepositoryConfig.html#getArchiveFetchBatchSize()"><code>CassandraArchiveRepositoryConfig.getArchiveFetchBatchSize()</code></a> and outputs the jar files in
 the path specified by <a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepositoryConfig.html#getArchiveOutputDirectory()"><code>CassandraArchiveRepositoryConfig.getArchiveOutputDirectory()</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html#getScriptArchives(java.util.Set)">getScriptArchives</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html" title="interface in com.netflix.nicobar.core.persistence">ArchiveRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>moduleIds</code> - keys to search for</dd>
<dt><span class="strong">Returns:</span></dt><dd>set of ScriptArchives retrieved from the database</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="deleteArchive(com.netflix.nicobar.core.archive.ModuleId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteArchive</h4>
<pre>public&nbsp;void&nbsp;deleteArchive(<a href="../../../../com/netflix/nicobar/core/archive/ModuleId.html" title="class in com.netflix.nicobar.core.archive">ModuleId</a>&nbsp;moduleId)
                   throws java.io.IOException</pre>
<div class="block">Delete an archive by ID</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html#deleteArchive(com.netflix.nicobar.core.archive.ModuleId)">deleteArchive</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/netflix/nicobar/core/persistence/ArchiveRepository.html" title="interface in com.netflix.nicobar.core.persistence">ArchiveRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>moduleId</code> - module id to delete</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="getRows(java.util.EnumSet)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRows</h4>
<pre>protected&nbsp;java.lang.Iterable&lt;com.netflix.astyanax.model.Row&lt;java.lang.String,java.lang.String&gt;&gt;&nbsp;getRows(java.util.EnumSet&lt;?&gt;&nbsp;columns)
                                                                                                 throws java.lang.Exception</pre>
<div class="block">Get all of the rows in in the table. Attempts to reduce the load on cassandra by splitting up the query into smaller sub-queries</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>columns</code> - which columns to select</dd>
<dt><span class="strong">Returns:</span></dt><dd>result rows</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="generateSelectByShardCql(java.util.EnumSet, java.lang.Integer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateSelectByShardCql</h4>
<pre>protected&nbsp;java.lang.String&nbsp;generateSelectByShardCql(java.util.EnumSet&lt;?&gt;&nbsp;columns,
                                        java.lang.Integer&nbsp;shardNum)</pre>
<div class="block">Generate the CQL to select specific columns by shard number.
 <pre>
      SELECT ${columns}... FROM script_repo WHERE shard_num = ?
 </pre></div>
</li>
</ul>
<a name="verifyHash(byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyHash</h4>
<pre>protected&nbsp;boolean&nbsp;verifyHash(byte[]&nbsp;expectedHashCode,
                 byte[]&nbsp;content)</pre>
</li>
</ul>
<a name="calculateHash(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateHash</h4>
<pre>protected&nbsp;byte[]&nbsp;calculateHash(byte[]&nbsp;content)</pre>
</li>
</ul>
<a name="calculateShardNum(com.netflix.nicobar.core.archive.ModuleId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateShardNum</h4>
<pre>protected&nbsp;int&nbsp;calculateShardNum(<a href="../../../../com/netflix/nicobar/core/archive/ModuleId.html" title="class in com.netflix.nicobar.core.archive">ModuleId</a>&nbsp;moduleId)</pre>
</li>
</ul>
<a name="getConfig()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getConfig</h4>
<pre>public&nbsp;<a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepositoryConfig.html" title="interface in com.netflix.nicobar.cassandra">CassandraArchiveRepositoryConfig</a>&nbsp;getConfig()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>configuration settings for this repository</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/netflix/nicobar/cassandra/BasicCassandraRepositoryConfig.Builder.html" title="class in com.netflix.nicobar.cassandra"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/netflix/nicobar/cassandra/CassandraArchiveRepository.Columns.html" title="enum in com.netflix.nicobar.cassandra"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/netflix/nicobar/cassandra/CassandraArchiveRepository.html" target="_top">Frames</a></li>
<li><a href="CassandraArchiveRepository.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
